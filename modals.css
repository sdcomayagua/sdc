/* modals.css */

/* modal base */
.modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.58);
  display:flex;align-items:flex-end;justify-content:center;
  z-index:100;
  opacity:0;visibility:hidden;pointer-events:none;
  transition:opacity .18s ease, visibility .18s ease;
}
.modal.open{opacity:1;visibility:visible;pointer-events:auto}

.sheet{
  width:min(980px,100%);
  max-height:92vh;
  overflow:auto;
  background:var(--card);
  border:1px solid var(--line);
  border-radius:18px 18px 0 0;
  box-shadow:var(--shadow);
}
.sheet .head{
  position:sticky;top:0;z-index:5;
  background:color-mix(in oklab, var(--card) 92%, transparent);
  border-bottom:1px solid var(--line);
  padding:12px;
}
.sheet .body{padding:12px}

/* zoom */
.zoomImg{
  width:100%;
  max-height:70vh;
  object-fit:contain;
  border-radius:16px;
  border:1px solid var(--line);
  background:#000;
}

/* product modal */
.pmWrap{display:grid;grid-template-columns:1fr;gap:12px}
@media (min-width:900px){
  .pmWrap{grid-template-columns:1.05fr .95fr;align-items:start}
}

.pmImageWrap{position:relative}
.pmImageWrap.out::after{
  content:"AGOTADO";
  position:absolute;
  top:16px;left:-70px;
  padding:10px 90px;
  font-weight:1000;
  letter-spacing:.14em;
  text-transform:uppercase;
  color:#fff;
  background:rgba(0,0,0,.72);
  border:1px solid rgba(255,255,255,.18);
  transform:rotate(-35deg);
  pointer-events:none;
}

.pmMainImg{
  width:100%;
  max-height:42vh;
  object-fit:contain !important;
  border-radius:16px;
  border:1px solid var(--line);
  background:color-mix(in oklab, var(--card2) 60%, #000);
  cursor:zoom-in;
}
@media (max-width:720px){.pmMainImg{max-height:34vh}}

.pmThumbs{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.pmThumb{
  width:52px;height:52px;border-radius:12px;border:1px solid var(--line);
  object-fit:cover;cursor:pointer;opacity:.9;
  background:color-mix(in oklab, var(--card2) 60%, #0a0f17);
}
.pmThumb.active{outline:2px solid var(--acc);opacity:1}

.pmName{font-weight:1000;font-size:16px;margin:0 0 6px 0}
.pmPrice{font-weight:1000;font-size:16px;margin-top:8px}
.pmBadges{margin-top:8px}
.pmDesc{margin-top:12px;color:var(--mut);font-size:13px;line-height:1.45;white-space:pre-wrap}

.pmActions{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}

/* calc */
.pmCalc{
  margin-top:10px;
  border:1px solid var(--line);
  background:color-mix(in oklab, var(--card) 92%, transparent);
  border-radius:14px;
  padding:10px;
}
.pmCalcRow{display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center}
.pmCalcItem b{font-weight:1000}

/* out note */
.pmOutNote{
  margin-top:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,107,107,.35);
  background:rgba(255,107,107,.10);
  color:#ffb3b3;
  font-weight:1000;
  font-size:12px;
  display:none;
}

/* sticky buy */
.pmBuySticky{
  position:sticky;
  bottom:0;
  z-index:6;
  margin-top:12px;
  padding-top:10px;
  background:linear-gradient(to top,
    color-mix(in oklab, var(--card) 96%, transparent) 60%,
    transparent 100%
  );
}

/* qty */
.pmQtyRow{display:flex;gap:12px;align-items:center}
.pmQty{
  display:flex;gap:8px;align-items:center;
  border:1px solid var(--line);
  background:color-mix(in oklab, var(--card) 92%, transparent);
  padding:6px;border-radius:14px;
}
.pmQty .mini{
  width:44px;height:44px;border-radius:12px;
  font-size:18px;font-weight:1000;
  border:1px solid var(--line);
  background:var(--card2);
  color:var(--txt);
  cursor:pointer;
}
.pmQtyNum{min-width:34px;text-align:center;font-size:16px;font-weight:1000}
#pmAddBtn{height:46px;border-radius:14px;font-weight:1000;width:100%}
.dangerBtn{
  background:rgba(255,107,107,.14);
  border:1px solid rgba(255,107,107,.35);
  color:#ffb3b3;
  font-weight:1000;
}

/* cart */
.cartLayout{display:grid;grid-template-columns:1fr;gap:12px}
.panel{background:var(--card2);border:1px solid var(--line);border-radius:16px;padding:12px}
.panelTitle{font-weight:1000;margin:0 0 10px 0;font-size:13px}
.hr{height:1px;background:var(--line);margin:12px 0}
.note{font-size:12px;color:var(--mut);line-height:1.35}
.two{display:grid;grid-template-columns:1fr;gap:10px}

.cartItem{
  display:flex;gap:10px;
  border:1px solid var(--line);
  border-radius:16px;
  padding:10px;margin-bottom:10px;
  align-items:center;
  background:color-mix(in oklab, var(--card) 70%, transparent);
}
.cartItem img{
  width:56px;height:56px;border-radius:12px;
  object-fit:cover;
  background:color-mix(in oklab, var(--card2) 60%, #0a0f17);
  cursor:pointer;
}
.cartTitle{font-weight:1000;cursor:pointer}
.cartMeta{margin-top:6px;font-size:12px;color:var(--mut)}
.cartMeta b{color:var(--txt)}
.qty{display:flex;gap:6px;align-items:center}
.mini{padding:6px 10px;border-radius:10px;border:1px solid var(--line);background:var(--card2);color:var(--txt);cursor:pointer}

/* cart alerts */
.cartAlert{
  margin:8px 0 12px 0;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,204,102,.35);
  background:rgba(255,204,102,.12);
  color:var(--warn);
  font-weight:1000;
  font-size:12px;
  display:none;
}
.checkoutBadge{
  margin:8px 0 12px 0;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  font-weight:1000;
  font-size:12px;
  color:var(--mut);
}
.checkoutBadge.local{border-color:rgba(37,211,102,.4);background:rgba(37,211,102,.10);color:#1f7a3c}
html[data-theme="dark"] .checkoutBadge.local{color:#a9ffbf}
.checkoutBadge.national{border-color:rgba(120,170,255,.35);background:rgba(120,170,255,.10);color:#cfe2ff}

/* wizard */
.checkoutBar{display:flex;gap:8px;margin-bottom:10px}
.chkStep{flex:1;display:flex;gap:8px;align-items:center;justify-content:center;padding:8px 10px;border-radius:12px;border:1px solid var(--line);font-size:12px;color:var(--mut);cursor:pointer}
.chkStep.active{background:rgba(37,211,102,.16);border-color:rgba(37,211,102,.35);color:#a9ffbf;font-weight:1000}
html[data-theme="light"] .chkStep.active{color:#0b1020;background:rgba(37,211,102,.22)}

.wizardNav{display:flex;gap:10px;margin-top:12px}
.wizardNav .btn{flex:1}

.wizardErr{
  display:none;
  margin-top:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,107,107,.35);
  background:rgba(255,107,107,.10);
  color:#ffb3b3;
  font-weight:1000;
  font-size:12px;
}

/* cart fab (whatsapp sticky inside confirm step) */
.cartFab{
  position:sticky;
  bottom:10px;
  margin-top:12px;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  background:color-mix(in oklab, var(--card) 92%, transparent);
  border:1px solid var(--line);
  border-radius:16px;
  padding:10px;
  box-shadow:var(--shadow);
}
.cartFab .btn{
  width:100%;
  height:46px;
  border-radius:14px;
  font-weight:1000;
}
